<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>北海道 2026 旅行行程規劃書 v5.0 (圖文並茂版)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0056b3; /* 冰藍色系 */
            --secondary-color: #00897b; /* 官網按鈕色系 - 青綠色 */
            --accent-color: #e3f2fd;
            --text-dark: #333;
            --text-light: #666;
            --bg-color: #f8f9fa;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --card-border: #dfe1e5;
        }

        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* --- Header --- */
        header {
            background-image: 
                linear-gradient(rgba(0, 40, 80, 0.4), rgba(0, 40, 80, 0.2)), /* 半透明遮罩，增加文字對比度 */
                url('https://www.snowtomamu.jp/common/wp-content/uploads/sites/9/2025/07/%E3%80%90%E3%83%88%E3%83%9E%E3%83%A0%E3%80%91CAT%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B7%E3%82%99-%E3%82%B9%E3%83%8E%E3%83%BC%E3%83%9B%E3%82%99%E3%83%BC%E3%83%88%E3%82%99%E5%85%A8%E6%99%AF%E3%83%A8%E3%82%B3-1.jpg');
            background-size: cover;
            background-position: 0% 60%;
            color: var(--white);
            padding: 5rem 1rem;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        h1 { margin: 0; font-size: 2.2rem; text-shadow: 0 2px 5px rgba(0,0,0,0.6); }
        .subtitle { font-size: 1.1rem; margin-top: 10px; font-weight: bold; text-shadow: 0 2px 4px rgba(0,0,0,0.6); }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        /* --- Dashboard & Cards --- */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: -40px; /* Overlap header */
        }
        @media (min-width: 600px) { .dashboard { grid-template-columns: 1fr 1fr; } }

        .card {
            background: var(--white);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--primary-color);
            height: fit-content;
        }
        .card h3 { margin-top: 0; color: var(--primary-color); border-bottom: 1px solid #eee; padding-bottom: 10px;}
        
        /* Google Flight Card Style */
        .google-flight-card {
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 16px;
            background-color: #fff;
            box-shadow: 0 1px 2px rgba(60,64,67,0.1);
            margin-bottom: 10px;
            font-family: Roboto, Arial, sans-serif;
        }
        .flight-header { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 12px; border-bottom: 1px solid #f1f3f4; padding-bottom: 8px; }
        .flight-header .airline { font-weight: bold; display: flex; align-items: center; }
        .route-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .airport { text-align: center; flex: 1; }
        .airport .code { font-size: 24px; font-weight: 400; }
        .airport .time { font-size: 20px; font-weight: bold; }
        .flight-path { flex: 2; text-align: center; position: relative; padding: 0 10px; }
        .flight-path .line { height: 2px; background-color: #dadce0; position: relative; margin: 10px 0; }
        .flight-path .line i { position: absolute; top: -8px; left: 50%; transform: translateX(-50%) rotate(0deg); background: #fff; padding: 0 5px; color: #5f6368; }
        .flight-footer { display: flex; justify-content: space-between; font-size: 12px; color: #5f6368; margin-top: 10px; }

        /* Hotel Info Items */
        .info-item { margin-bottom: 15px; font-size: 0.95rem; display: flex; }
        .info-item i.icon-label { width: 25px; color: var(--primary-color); text-align: center; margin-top: 4px; }
        .info-content { margin-left: 10px; flex: 1; }

        /* Buttons */
        .btn-group { margin-top: 8px; display: flex; flex-wrap: wrap; gap: 5px; }
        .btn { display: inline-flex; align-items: center; padding: 4px 10px; border-radius: 4px; font-size: 0.8rem; text-decoration: none; cursor: pointer; transition: 0.3s; border: none; }
        .btn-map { background-color: #e8f5e9; color: #2e7d32; } .btn-map:hover { background-color: #c8e6c9; }
        /* 航班搜尋按鈕 */
        .btn-flight {
            background-color: var(--accent-color);
            color: var(--primary-color);
        }
        .btn-flight:hover { background-color: #bbdefb; }

        .btn-web { background-color: #e0f2f1; color: var(--secondary-color); } .btn-web:hover { background-color: #b2dfdb; }
        .btn-weather { background-color: #fae58a; color: var(--secondary-color); } .btn-weather:hover { background-color: #ec9d34; }
        /* --- Navigation Tabs --- */
        .nav-scroller {
            overflow-x: auto; white-space: nowrap; background: var(--white); padding: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; margin-top: 20px;
        }
        .nav-tabs { display: flex; padding: 0 20px; list-style: none; margin: 0; }
        .nav-item { padding: 10px 20px; cursor: pointer; border-bottom: 3px solid transparent; color: var(--text-light); font-weight: bold; transition: 0.3s; }
        .nav-item.active { border-bottom-color: var(--primary-color); color: var(--primary-color); }

        /* --- Timeline (圖文並茂版) --- */
        .day-content { display: none; animation: fadeIn 0.5s; padding-top: 20px; }
        .day-content.active { display: block; }
        .timeline { position: relative; padding: 10px 0; }
        
        /* 新的時間軸項目樣式 - Flex 佈局 */
        .timeline-item {
            position: relative;
            padding-left: 35px; /* 留給圓點和線條的空間 */
            margin-bottom: 25px;
            display: flex;      /* 啟用 Flexbox */
            align-items: flex-start; /* 內容頂部對齊 */
            gap: 15px;          /* 文字與圖片間距 */
        }

        /* 時間軸線條與圓點 */
        .timeline-item::before {
            content: ''; position: absolute; left: 6px; top: 6px; width: 12px; height: 12px;
            border-radius: 50%; background: var(--primary-color); z-index: 2;
        }
        .timeline-item::after {
            content: ''; position: absolute; left: 11px; top: 18px; bottom: -30px;
            width: 2px; background: #e0e0e0; z-index: 1;
        }
        .timeline-item:last-child::after { display: none; }

        /* 左側文字內容區 */
        .timeline-content {
            flex: 1; /* 佔據剩餘空間 */
            min-width: 0; /* 防止文字溢出 */
        }
        .time { font-weight: bold; color: var(--primary-color); font-size: 0.9rem; display: block; margin-bottom: 2px; }
        .activity-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 5px; line-height: 1.3; }
        .activity-desc { color: var(--text-light); font-size: 0.95rem; margin-bottom: 8px; }

        /* 右側圖片區 */
        .timeline-image {
            flex-shrink: 0; /* 防止圖片被壓縮 */
            width: 120px;   /* 固定寬度，可依需求調整 */
            height: 80px;   /* 固定高度 */
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #eee;
        }
        .timeline-image img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* 保持比例填滿 */
        }

        /* 手機版響應式調整 */
        @media (max-width: 600px) {
            .timeline-item {
                flex-direction: column; /* 改為垂直排列 */
            }
            .timeline-image {
                width: 100%; /* 圖片變為滿寬 */
                height: 150px; /* 高度增加 */
                margin-top: 10px;
                order: 2; /* 讓圖片排在文字下方 (可選) */
            }
             .timeline-content {
                order: 1;
            }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        footer { text-align: center; padding: 20px; color: var(--text-light); font-size: 0.8rem; border-top: 1px solid #eee; margin-top: 40px; }
    </style>
</head>
<body>

<header>
    <h1><i class="fas fa-snowflake"></i> 北海道スキー旅行 </h1>
    <div class="subtitle">2026年2月4日 - 2月11日 (8天7夜)</div>
</header>

<div class="container">
    <div class="dashboard">
        <div class="card" style="grid-column: span 2;">
            <h3><i class="fas fa-plane"></i> 航班資訊 </h3>
            <div class="google-flight-card">
                <div class="flight-header">
                    <span class="airline"><img src="https://www.evaair.com/favicon.ico" style="width:20px;margin-right:8px;">長榮航空 BR166
                        </span>
                    <span class="flight-date">2026年2月4日 (週三)</span>
                </div>
                <div class="flight-body" style="display:flex;">
                    <div class="route-info" style="flex:1;">
                        <div class="airport"><div class="code">TPE</div><div class="time">06:15</div></div>
                        <div class="flight-path"><div class="duration">3h 45m</div><div class="line"><i class="fas fa-plane"></i></div><div class="status" style="color:#188038;font-size:12px;">準時</div></div>
                        <div class="airport"><div class="code">CTS</div><div class="time">11:00</div></div>
                    </div>
                </div>
                <div class="btn-group">
                        <button class="btn btn-flight" onclick="searchFlight('BR166')"><i class="fas fa-search"></i> 搜尋航班</button>
                    </div>
            </div>
            <div class="google-flight-card">
                <div class="flight-header">
                    <span class="airline"><img src="https://www.evaair.com/favicon.ico" style="width:20px;margin-right:8px;">長榮航空 BR115
                        </span>
                    <span class="flight-date">2026年2月11日 (週三)</span>
                </div>
                 <div class="flight-body" style="display:flex;">
                    <div class="route-info" style="flex:1;">
                        <div class="airport"><div class="code">CTS</div><div class="time">15:20</div></div>
                        <div class="flight-path"><div class="duration">4h 45m</div><div class="line"> <i class="fas fa-plane"></i></div><div class="status" style="color:#188038;font-size:12px;">準時</div></div>
                        <div class="airport"><div class="code">TPE</div><div class="time">19:05</div></div>
                    </div>
                </div>
                <div class="btn-group">
                        <button class="btn btn-flight" onclick="searchFlight('BR115')"><i class="fas fa-search"></i> 搜尋航班</button>
                    </div>
            </div>
        </div>

        <div class="card">
            <h3><i class="fas fa-bed"></i> 住宿安排</h3>
            <div class="info-item">
                <i class="fas fa-hotel icon-label"></i> 
                <div class="info-content">
                    <strong>札幌 (2/4-2/5)</strong> JRタワーホテル日航札幌
                    <img src="https://d3g2yh83to8qa2.cloudfront.net/wp-content/uploads/sites/57/2016/04/04064136/exterior_990x590.jpg" 
                              alt="JR塔日航酒店外觀" 
                              style="width: 100%; max-height: 150px; object-fit: cover; border-radius: 6px; margin-top: 10px;">
                    
                    <div class="btn-group">
                        <button class="btn btn-map" onclick="openMap('JR Tower Hotel Nikko Sapporo')"><i class="fas fa-map-marker-alt"></i> 地圖</button>
                        <a href="https://www.jrhotels.co.jp/tower/" target="_blank" class="btn btn-web"><i class="fas fa-globe"></i> 官網</a>
                        <a href="https://www.google.com/search?q=%E6%9C%AD%E5%B9%8C%E5%A4%A9%E6%B0%A3&rlz=1C1JZAP_zh-TWTW745TW745&oq=%E6%9C%AD%E5%B9%8C%E5%A4%A9%E6%B0%A3&gs_lcrp=EgZjaHJvbWUqEwgAEEUYJxg7GEYYgAIYgAQYigUyEwgAEEUYJxg7GEYYgAIYgAQYigUyBwgBEAAYgAQyBwgCEAAYgAQyBwgDEAAYgAQyBwgEEAAYgAQyBwgFEAAYgAQyBwgGEAAYgAQyBwgHEAAYgAQyBwgIEAAYgAQyBwgJEAAYgATSAQgxNzk2ajBqNKgCALACAQ&sourceid=chrome&ie=UTF-8"
                         target="_blank" class="btn btn-weather"><i class="fas fa-cloud-sun"></i> 天氣</a>
                    </div>
                </div>
            </div>
            <div class="info-item">
                <i class="fas fa-tree icon-label"></i> 
                <div class="info-content">
                    <strong>占冠村 (2/6-2/8)</strong> 星野リゾナーレトマム
                    

                   <img src="https://www.snowtomamu.jp/winter/topics/resonare-point/images/img01.jpg" 
                              alt="星野リゾナーレトマム外觀" 
                              style="width: 100%; max-height: 150px; object-fit: cover; border-radius: 6px; margin-top: 10px;">
                    
                    <div class="btn-group">
                        <button class="btn btn-map" onclick="openMap('Hoshino Resorts Risonare Tomamu')"><i class="fas fa-map-marker-alt"></i> 地圖</button>
                        <a href="https://www.snowtomamu.jp/winter/cn/" target="_blank" class="btn btn-web"><i class="fas fa-globe"></i> 官網</a>
                        <a href="https://www.google.com/search?q=%E5%8D%A0%E5%86%A0%E6%9D%91%E5%A4%A9%E6%B0%A3&sca_esv=e0ee5455e7f1c925&rlz=1C1JZAP_zh-TWTW745TW745&sxsrf=AE3TifM2uFObjalgGqjrPv1JbqiJBG_wDw%3A1764836269564&ei=rUMxacScIuO1vr0P3b2poAE&ved=0ahUKEwiEp7y3v6ORAxXjmq8BHd1eChQQ4dUDCBE&uact=5&oq=%E5%8D%A0%E5%86%A0%E6%9D%91%E5%A4%A9%E6%B0%A3&gs_lp=Egxnd3Mtd2l6LXNlcnAiD-WNoOWGoOadkeWkqeawozIKECMYgAQYJxiKBTIFEAAY7wUyCBAAGIAEGKIEMggQABiABBiiBEiMJ1CUDlj3I3ABeAGQAQCYAU6gAdMBqgEBM7gBA8gBAPgBAvgBAZgCBKAC8wHCAgoQABiwAxjWBBhHwgIFECEYoAGYAwCIBgGQBgqSBwE0oAfsB7IHATO4B-ABwgcHMC4yLjEuMcgHGQ&sclient=gws-wiz-serp"
                         target="_blank" class="btn btn-weather"><i class="fas fa-cloud-sun"></i> 天氣</a>
                    </div>
                </div>
            </div>
            <div class="info-item">
                <i class="fas fa-water icon-label"></i> 
                <div class="info-content">
                    <strong>支笏湖 (2/9-2/10) </strong>しこつ湖 鶴雅別荘 碧の座

                 <img src="https://www.aonoza.com/lang_module/rooms/images/img-title.jpg" 
                              alt="しこつ湖 鶴雅別荘 碧の座外觀" 
                              style="width: 100%; max-height: 150px; object-fit: cover; border-radius: 6px; margin-top: 10px;">
                   
                    <div class="btn-group">
                        <button class="btn btn-map" onclick="openMap('Lake Shikotsu Tsuruga Besso Ao no Za')"><i class="fas fa-map-marker-alt"></i> 地圖</button>
                        <a href="https://www.aonoza.com/" target="_blank" class="btn btn-web"><i class="fas fa-globe"></i> 官網</a>
                        <a href="https://www.google.com/search?q=%E6%94%AF%E7%AC%8F%E6%B9%96%E5%A4%A9%E6%B0%A3&sca_esv=e0ee5455e7f1c925&rlz=1C1JZAP_zh-TWTW745TW745&sxsrf=AE3TifOqFYtWsS6ig53cl12XloIn3YvSgw%3A1764836372788&ei=FEQxadXiL4r91e8P4qq72A8&ved=0ahUKEwjVvNjov6ORAxWKfvUHHWLVDvsQ4dUDCBE&uact=5&oq=%E6%94%AF%E7%AC%8F%E6%B9%96%E5%A4%A9%E6%B0%A3&gs_lp=Egxnd3Mtd2l6LXNlcnAiD-aUr-esj-a5luWkqeawozIFEAAYgAQyCBAAGIAEGKIEMgUQABjvBTIIEAAYgAQYogRItzJQAFjzKnACeACQAQCYAT6gAewBqgEBNLgBA8gBAPgBAvgBAZgCBqACkALCAgYQABgHGB7CAggQABiiBBiJBcICChAjGIAEGCcYigXCAgsQABiABBixAxiDAZgDAJIHATagB8EIsgcBNLgHhQLCBwUwLjEuNcgHGw&sclient=gws-wiz-serp"
                         target="_blank" class="btn btn-weather"><i class="fas fa-cloud-sun"></i> 天氣</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="nav-scroller">
    <ul class="nav-tabs" id="dayTabs"></ul>
</div>

<div class="container" id="itineraryContent" style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: var(--shadow);">
    </div>

<footer>
    <p>行程規劃模型 | 資料來源：Cirium (航班模擬), Google Maps | 圖片來源：網路公開資源</p>
</footer>

<script>
    // --- Data Model (新增 image 屬性) ---
    const itineraryData = [
        {
            date: "2/4 (三)", title: "抵達札幌 & 雪祭",
            events: [
                { time: "11:00", title: "抵達新千歲機場", desc: "入境手續、領取行李，準備開始旅程！", location: "New Chitose Airport", image: "https://www.hokkaido-airports.com/ja/new-chitose/spend/event/assets/images/photocontest2025-result13.jpg" },
                { time: "12:00", title: "搭乘 JR 前往札幌", desc: "抵達札幌先寄放行李後用餐", location: "JR Sapporo Station" , image:"https://t.pimg.jp/102/749/923/1/102749923.jpg"},
                { time: "午餐", title: "みそラーメンのよし乃", desc: "傳說！北海道味噌拉麵，暖暖胃。", location: "Miso Ramen Yoshi-no Sapporo", image: "https://www.apiadome.com/share/img_uploads//pc/00001272_00003168_00000172.jpg" },
                { time: "下午", title: "Stellar Place & 下午茶", desc: "グラッシェル吃冰，Stellar Place逛逛。", location: "GLACIEL Sapporo Stellar Place", url: "http://www.stellarplace.net/", image: "https://www.glaciel.jp/stella/images/menu/newarrival_69.jpg" },
                { time: "15:00", title: "JR塔日航酒店 Check-in", desc: "直結車站的高層飯店，景觀絕佳。", location: "JR Tower Hotel Nikko Sapporo", url: "https://www.jrhotels.co.jp/tower/", image: "https://www.jrhotels.co.jp/tower/wp-content/themes/jr-tower/assets/img/home/mv_01.jpg" },
                { time: "夜間", title: "札幌雪祭 (大通會場)", desc: "觀賞壯觀的大型冰雪雕像與夜間點燈。", location: "Sapporo Odori Park", url: "https://www.snowfes.com/", image: "https://www.snowfes.com/wp/wp-content/uploads/2023/11/main-visual-pc.jpg" }
            ]
        },
        {
            date: "2/5 (四)", title: "札幌市區巡禮",
            events: [
                { time: "06:30", title: "飯店早餐 (Sky J)", desc: "35樓高空景觀自助餐。", location: "JR Tower Hotel Nikko Sapporo Sky J", image: "https://www.jrhotels.co.jp/tower/restaurant/skyj/img/main.jpg" },
                { time: "10:00", title: "市區觀光 & AOAO 水族館", desc: "紅磚廳舍、狸小路散策，參觀都市型水族館。", location: "AOAO SAPPORO", url: "https://aoao-sapporo.blue/", image: "https://aoao-sapporo.blue/wp/wp-content/themes/aoao/assets/img/top/kv_sp_01.jpg" },
                { time: "12:00", title: "午餐 & 泡湯：湯処花ゆづき", desc: "享受日式溫泉與定食午餐。", location: "Sapporo Hanayuzuki", url: "https://www.hanayuzuki.jp/", image: "https://www.hanayuzuki.jp/img/top/main01.jpg" },
                { time: "16:00", title: "札幌啤酒博物館", desc: "了解啤酒歷史，試飲經典啤酒。", location: "Sapporo Beer Museum", url: "https://www.sapporobeer.jp/brewery/s_museum/", image: "https://www.sapporobeer.jp/brewery/s_museum/img/main_sp.jpg" },
                { time: "18:00", title: "晚餐：成吉思汗烤肉", desc: "在啤酒園享用ガーデングリル新鮮羊肉。", location: "Sapporo Garden Grill", url: "https://www.sapporo-bier-garten.jp/garden/", image: "https://www.sapporo-bier-garten.jp/garden/img/main.jpg" }
            ]
        },
        {
            date: "2/6 (五)", title: "移動至 Tomamu",
            events: [
                { time: "11:46", title: "JR 特急移動", desc: "札幌駅 → トマム駅 (直達，約 95 分鐘)。", location: "Tomamu Station", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Kiha_261-1000_Super_Tokachi.jpg/800px-Kiha_261-1000_Super_Tokachi.jpg" },
                { time: "13:30", title: "抵達 Risonare Tomamu", desc: "辦理入住，全室配備私人桑拿與按摩浴缸。", location: "Hoshino Resorts Risonare Tomamu", url: "https://www.snowtomamu.jp/winter/cn/", image: "https://www.snowtomamu.jp/winter/wp-content/uploads/sites/4/2017/10/risonare_kv.jpg" },
                { time: "下午", title: "微笑海灘 & 木林之湯", desc: "享受日本最大的室內造浪泳池與露天風呂。", location: "Mina-Mina Beach", image: "https://www.snowtomamu.jp/winter/wp-content/uploads/sites/4/2017/10/minamina_kv.jpg" },
                { time: "夜間", title: "Ice Village 冰雪村", desc: "參觀冰教堂、冰酒吧等夢幻場景。(冰教堂 19:45-20:00)", location: "Tomamu Ice Village", url: "https://www.snowtomamu.jp/winter/icevillage/", image: "https://www.snowtomamu.jp/winter/wp-content/uploads/sites/4/2017/10/icevillage_kv.jpg" }
            ]
        },
        // ... (為節省長度，後續日期資料結構相同，請自行依樣板補充圖片連結) ...
         {
            date: "2/7 (六)", title: "滑雪全日",
            events: [
                { time: "早餐", title: "森林餐廳 ニニヌプリ", desc: "在森林包圍中享用著名的肉類自助餐。", location: "Nininupuri Tomamu", image: "https://www.snowtomamu.jp/winter/wp-content/uploads/sites/4/2017/10/nininupuri_kv.jpg" },
                { time: "白天", title: "盡情滑雪！", desc: "享受北海道著名的粉雪 (Powder Snow)。", location: "Tomamu Ski Resort", image: "https://www.snowtomamu.jp/winter/wp-content/uploads/sites/4/2017/08/ski_kv.jpg" },
                { time: "18:30", title: "晚餐：OTTO SETTE", desc: "精緻義大利料理饗宴 (需著正裝)。", location: "OTTO SETTE TOMAMU", url: "https://www.snowtomamu.jp/winter/restaurant/ottosette.php", image: "https://www.snowtomamu.jp/winter/wp-content/uploads/sites/4/2017/10/ottosette_kv.jpg" }
            ]
        },
        {
            date: "2/9 (一)", title: "前往支笏湖",
             events: [
                { time: "06:30", title: "水之教堂參觀", desc: "安藤忠雄設計的經典建築，感受寧靜氛圍。", location: "Chapel on the Water Tomamu", image: "https://www.snowtomamu.jp/wedding/wp-content/uploads/sites/9/2017/09/water_kv.jpg" },
                { time: "13:40", title: "前往支笏湖", desc: "經南千歲轉乘接駁車抵達。", location: "Lake Shikotsu", image: "https://www.aonoza.com/common/img/header_bg.jpg" },
                { time: "14:00", title: "碧の座 Check-in", desc: "全室湖景套房的頂級溫泉旅館。", location: "Lake Shikotsu Tsuruga Besso Ao no Za", url: "https://www.aonoza.com/", image: "https://www.aonoza.com/common/img/top_main01.jpg" }
            ]
        },
        {
            date: "2/10 (二)", title: "支笏湖冰濤祭",
             events: [
                { time: "白天", title: "支笏湖冰濤祭", desc: "欣賞用湖水噴灑凍結而成的冰柱藝術。", location: "Lake Shikotsu Ice Festival", url: "https://hyoutou-special.chitose-kanko.or.jp/", image: "https://hyoutou-special.chitose-kanko.or.jp/assets/img/main_visual_sp.jpg" },
                { time: "晚餐", title: "旅館鐵板燒", desc: "品嚐北海道當季食材製作的鐵板料理。", location: "Lake Shikotsu Tsuruga Besso Ao no Za", image: "https://www.aonoza.com/dishes/img/main.jpg" }
            ]
        },
         {
            date: "2/11 (三)", title: "旅程結束",
             events: [
                { time: "11:00", title: "前往機場", desc: "帶著滿滿回憶，搭車前往新千歲機場。", location: "New Chitose Airport", image: "https://www.new-chitose-airport.jp/tw/img/main_visual_sp.jpg" },
                { time: "15:20", title: "搭機返台 (BR115)", desc: "CTS → TPE，期待下次的旅行！", location: "New Chitose Airport International Terminal", image: "https://www.evaair.com/images/evaair-global/evaair-aircraft-787-10_tcm32-57657.jpg" }
            ]
        }
    ];
    // (註：為了範例完整性，我幫您補上了部分日期的圖片。您可以自行替換或新增其他日期的 image 連結)

    // --- Logic Functions ---
    function openMap(query) { window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank'); }
      function searchFlight(flightNo) {
        // Construct Google Search URL for Flight info
        const url = `https://www.google.com/search?q=EVA+Air+${flightNo}+flight+status`;
        window.open(url, '_blank');
    }
    function init() {
        const tabsContainer = document.getElementById('dayTabs');
        const contentContainer = document.getElementById('itineraryContent');
        itineraryData.forEach((day, index) => {
            const tab = document.createElement('li'); tab.className = `nav-item ${index === 0 ? 'active' : ''}`; tab.textContent = day.date; tab.onclick = () => switchTab(index); tabsContainer.appendChild(tab);
            const contentDiv = document.createElement('div'); contentDiv.className = `day-content ${index === 0 ? 'active' : ''}`; contentDiv.id = `day-${index}`;
            
            let eventsHtml = '';
            day.events.forEach(event => {
                const mapBtn = event.location ? `<button class="btn btn-map" onclick="openMap('${event.location}')"><i class="fas fa-map-marker-alt"></i> 地圖</button>` : '';
                const webBtn = event.url ? `<a href="${event.url}" target="_blank" class="btn btn-web"><i class="fas fa-globe"></i> 官網</a>` : '';
                // 新增：圖片 HTML 結構
                const imageHtml = event.image ? `<div class="timeline-image"><img src="${event.image}" alt="${event.title}"></div>` : '';
                
                // 修改：新的 Flex 佈局結構
                eventsHtml += `
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <span class="time">${event.time || ''}</span>
                            <div class="activity-title">${event.title}</div>
                            <div class="activity-desc">${event.desc}</div>
                            <div class="btn-group">${mapBtn}${webBtn}</div>
                        </div>
                        ${imageHtml} </div>
                `;
            });
            contentDiv.innerHTML = `<h2 style="margin-top:0; color:var(--primary-color);">${day.date} ${day.title}</h2><div class="timeline">${eventsHtml}</div>`;
            contentContainer.appendChild(contentDiv);
        });
    }
    function switchTab(index) {
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active')); document.querySelectorAll('.nav-item')[index].classList.add('active');
        document.querySelectorAll('.day-content').forEach(el => el.classList.remove('active')); document.getElementById(`day-${index}`).classList.add('active');
        if(window.innerWidth < 600) { document.getElementById('itineraryContent').scrollIntoView({behavior: 'smooth', block: 'start'}); }
    }
    init();
</script>
</body>
</html>